{% extends 'base.html' %}
{% block content %}
<h2>Categorias</h2>
<div class="card">
  <button onclick="document.getElementById('modal-categoria').showModal()">Nova categoria</button>
  <dialog id="modal-categoria">
    <form method="post" action="/categorias/criar">
      <h3>Nova Categoria</h3>
      <p><input type="text" name="nome" placeholder="Nome" required /></p>
      <div>
        <button type="submit">Salvar</button>
        <button type="button" onclick="this.closest('dialog').close()">Cancelar</button>
      </div>
    </form>
  </dialog>
  <script>
    const mcat = document.getElementById('modal-categoria');
    mcat?.addEventListener('click', (e) => { if (e.target === mcat) mcat.close(); });
  </script>
</div>
<div class="card">
  <table>
    <thead><tr><th>Nome</th><th>Ações</th></tr></thead>
    <tbody>
      {% for c in categorias %}
        <tr>
          <td>{{ c.nome }}</td>
          <td>
            <form method="post" action="/categorias/excluir/{{ c.id }}" onsubmit="return confirm('Excluir categoria?');">
              <button type="submit">Excluir</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

